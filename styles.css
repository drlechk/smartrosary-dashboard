  :root { color-scheme: dark; }
  * { box-sizing: border-box; }
  body {
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI",
                 Roboto, Ubuntu, "Helvetica Neue", Arial, sans-serif;
    margin:0; background:#0b0f14; color:#eaf0f6; overflow-x:hidden;
  }
  header {
    padding:18px 16px; text-align:center; border-bottom:1px solid #18212b; background:#0e141b;
  }
  h1 { margin:0; font-size:20px; font-weight:700; letter-spacing:.2px; }
  .toolbar-wrap { display:flex; justify-content:center; }


  .toolbar {
  display: flex;
  padding:12px;
  justify-content: center;   /* center horizontally */
  gap: 10px;                 /* spacing between buttons */
}

  button, select {
    border:0; border-radius:10px; padding:10px 14px; font-weight:600; cursor:pointer;
    transition:transform .05s ease; background:#1f2937; color:#eaf0f6;
  }
  button:active { transform:scale(0.98); }
  #connectBtn     { background:#03a9f4; color:#001018; }
  #refreshBtn     { background:#1f2937; }
  #backupBtn      { background:#0ea5e9; color:#001018; }
  #restoreBtn     { background:#16a34a; color:#00150b; }
  #disconnectBtn  { background:#b91c1c; color:#fff; }
  #resetBtn       { background:#9c27b0; color:#fff; }
  #langSelect     { background:#0f1720; border:1px solid #1f2b3a; }
  #status { text-align:center; color:#95a7ba; font-size:13px; padding-bottom:8px; }
.wrap {
  max-width: 1400px;  /* or 1400px if you want even wider */
  margin: 0 auto;
  padding: 12px;
}
.grid {
  display: grid;
  gap: 24px;
  grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
}
  @media (max-width: 800px) { .grid { grid-template-columns: 1fr; } }
  .card {
    background:#101722; border:1px solid #1a2733; border-radius:14px; padding:16px;
    box-shadow:0 6px 24px rgba(0,0,0,.25);
  }
  .card h3 { margin:0 0 12px; font-size:16px; font-weight:700; color:#cfe4ff; }
  .kpis { display:grid; grid-template-columns:repeat(2,1fr); gap:10px; }
  .kpi { background:#0d131c; border:1px solid #172231; border-radius:12px; padding:10px 12px; }
  .kpi .label { color:#9fb3c8; font-size:12px; }
  .kpi .value { font-size:18px; font-weight:800; margin-top:2px; line-height:1.1; }
  .pill {
    display:inline-block; background:#0d2030; border:1px solid #1d3551;
    color:#cde3ff; padding:6px 10px; border-radius:999px; font-size:13px;
  }
  .badge {
    display:inline-flex; align-items:center; gap:4px;
    background:#0d2030; border:1px solid #1d3551;
    color:#cde3ff; padding:4px 8px; border-radius:8px; font-size:12px;
    line-height:1.2;
  }
  .badge.muted {
    background:#0d1a27; border-color:#1a2c3d; color:#95a7ba;
  }
  .flex { display:flex; gap:12px; align-items:center; flex-wrap:wrap; }
  .muted { color:#95a7ba; font-size:12px; }
  .smallnote { color:#7d8fa1; font-size:11px; margin-top:8px; }
.chart { position:relative; width:100%; height:260px; }
.card .chart + .chart { margin-top: 20px; }
.card h3 + h3 { margin-top: 24px; }
.card h3 + .chart { margin-top: 12px; }
.card .card-separator {
  width: 100%;
  height: 1px;
  background: #1a2733;
  margin: 28px 0 22px;
}
.card .chart + .card-separator { margin-top: 28px; }
.card .card-separator + h3 { margin-top: 0; }
.card .card-separator + h3 + .chart { margin-top: 16px; }
  canvas { display:block; width:100%; height:100%; }

  .mono {
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
    font-size:12px;
  }

  .row { display:flex; gap:8px; align-items:center; flex-wrap:wrap; margin-bottom: 12px;}
  /* Progress bar */
progress {
  width:100%;
  height:14px;
  border-radius:999px;
  overflow:hidden;
  background:#0d131c;
  border:1px solid #172231;
  margin-top:12px;   /* ðŸ‘ˆ adds more room above */
}

/* WebKit (Chrome, Edge, Safari) */
progress::-webkit-progress-bar {
  background:#0d131c;
}
progress::-webkit-progress-value {
  background:#03a9f4;
}

/* Firefox */
progress::-moz-progress-bar {
  background:#03a9f4;
}

.header-with-lang { position: relative; display: flex; justify-content: center; align-items: center; padding: 16px 12px; }
.header-with-lang h1 { margin: 0; font-size: 1.2em; line-height: 1.2; text-align: center; }
#langSelect { position: absolute; right: 12px; font-size: 1em; padding: 4px 6px; }
.settings-list { display:grid; gap:14px; }
.setting { 
  display:flex; align-items:center; justify-content:space-between;
  background:#0d131c; border:1px solid #172231; border-radius:12px; padding:10px 12px;
}
.setting .meta { display:flex; flex-direction:column; gap:2px; }
.setting .title { font-weight:700; color:#cfe4ff; font-size:14px; }
.setting .desc  { color:#95a7ba; font-size:12px; }

.switch {
  position:relative; width:46px; height:26px;
}
.switch input { display:none; }
.slider {
  position:absolute; cursor:pointer; inset:0; background:#1f2937; border:1px solid #263244;
  border-radius:999px; transition:background .2s, border-color .2s;
}
.slider:before {
  content:""; position:absolute; height:20px; width:20px; left:2px; top:2px;
  background:#eaf0f6; border-radius:50%; transition:transform .2s;
}
/* Active (checked) color = #03a9f4 */
.switch input:checked + .slider { background:#03a9f4; border-color:#0286c2; }
.switch input:checked + .slider:before { transform:translateX(20px); }
.range-wrap { display:flex; align-items:center; gap:10px; min-width:160px; }
.range-wrap input[type="range"] { width:140px; }

input[type="range"] {
  -webkit-appearance: none;
  width: 140px;
  height: 6px;
  border-radius: 999px;
  background: #0d131c;
  border: 1px solid #172231;
  outline: none;
}

/* Chrome / Edge / Safari */
input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: #03a9f4;
  cursor: pointer;
  border: none;
  margin-top: -6px; /* centers thumb */
}
input[type="range"]::-webkit-slider-runnable-track {
  background: #03a9f4;
  height: 6px;
  border-radius: 999px;
}

/* Firefox */
input[type="range"]::-moz-range-thumb {
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: #03a9f4;
  cursor: pointer;
  border: none;
}
input[type="range"]::-moz-range-track {
  background: #03a9f4;
  height: 6px;
  border-radius: 999px;
}

/* IE */
input[type="range"]::-ms-thumb {
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: #03a9f4;
  cursor: pointer;
  border: none;
}
input[type="range"]::-ms-track {
  background: #03a9f4;
  height: 6px;
  border-radius: 999px;
}

/* Remote control card */
.history-card { display:flex; flex-direction:column; gap:18px; }
.history-card.history-muted { opacity:0.55; filter:grayscale(.1); }
.history-head { display:flex; justify-content:space-between; align-items:center; gap:12px; flex-wrap:wrap; }
.history-columns {
  display:grid;
  gap:16px;
  grid-template-columns:repeat(auto-fit, minmax(320px, 1fr));
}
.history-panel {
  display:flex; flex-direction:column; gap:12px;
  background:#0d131c; border:1px solid #172231; border-radius:12px; padding:12px;
}
.history-row { justify-content:flex-start; margin-bottom:0; }
.history-sep { height:1px; background:#1a2733; width:100%; }
.history-restore-row {
  display:flex; gap:8px; flex-wrap:wrap; align-items:center;
}
.history-card .badge:empty {
  display:none;
}
.history-card .pill:empty {
  display:none;
}
.history-restore-row input[type="file"] {
  background:#0f141a; color:#eaf0f6; border:1px solid #2a3442; border-radius:8px; padding:6px 8px;
}
.history-file-list { display:flex; flex-direction:column; gap:6px; }
.history-file-list .history-file {
  display:flex; align-items:center; justify-content:space-between;
  gap:10px; padding:4px 0; border-bottom:1px solid #1a2733;
}
.history-file-list .history-file:last-child { border-bottom:0; }

.history-chart-head {
  display:flex; justify-content:space-between; align-items:center; gap:12px; flex-wrap:wrap;
}
.history-chart-controls { gap:8px; }
.history-chart-wrap { height:340px; }

.history-legend {
  display:flex; flex-direction:column; align-items:center; justify-content:center; gap:6px;
}
.legend-row {
  display:flex; flex-wrap:wrap; justify-content:center; gap:12px; width:100%;
}
.legend-item { display:flex; align-items:center; gap:6px; font-size:13px; color:#cfe4ff; white-space:nowrap; }
.legend-color {
  width:14px; height:14px; border-radius:3px; border:1px solid #333;
}
.legend-color.hatched {
  background-color: var(--legend-base, #444);
  background-image: repeating-linear-gradient(
    45deg,
    rgba(0,0,0,0.45) 0,
    rgba(0,0,0,0.45) 2px,
    transparent 2px,
    transparent 4px
  );
}

.history-card button.danger {
  background:#2a171a;
  border:1px solid #512227;
  color:#ffc4c9;
}

.history-card select:disabled,
.history-card button:disabled {
  opacity:0.6;
  cursor:not-allowed;
}

.remote-wrap { display:grid; gap:12px; justify-items:center; }
.canvas-shell { position: relative; display: inline-block; user-select: none; border-radius: 50%; padding: 8px; background: #11161d; }
#lvgl_canvas {
  display:block; width:min(92vw, 320px); height:auto; /* logical 320Ã—320 */
  background: radial-gradient(ellipse at center, #0f1319 0%, #0f1319 60%, #0c1016 100%);
  border: 3px solid #03a9f4; border-radius: 50%; clip-path: circle(50% at 50% 50%);
  outline:none; touch-action:none; cursor: crosshair;
}
.dpad {
  --btn: clamp(56px, 14vw, 72px);
  display:grid; grid-template-columns: var(--btn) var(--btn) var(--btn);
  grid-template-rows: var(--btn) var(--btn) var(--btn);
  gap:12px; justify-items:center; align-items:center;
}
.dpad button {
  width:var(--btn); height:var(--btn);
  border-radius:16px; border:0; background:#1a232e; color:#e6e9ee;
  font-size:calc(var(--btn)*0.35); font-weight:700; cursor:pointer;
  box-shadow:0 2px 8px rgba(0,0,0,.35); touch-action:manipulation;
}
.dpad .empty { width:var(--btn); height:var(--btn); visibility:hidden; }
.dpad button.center { font-size:calc(var(--btn)*0.28); background:#263241; }
.dpad button:disabled { opacity:.5; cursor:default; }
.remote-muted { opacity:.6; filter:grayscale(.1); }
.card.card-muted { opacity:.6; filter:grayscale(.1); }
#rcStatus { font-size:12px; color:#95a7ba; }

/* Mobile override: left-align title */
@media (max-width: 600px) {
  .header-with-lang {
    justify-content: flex-start;
  }
  .header-with-lang h1 {
    text-align: left;
  }
}

/* --- Wallpaper Card --- */

/* Card muted state (applied on #wpCard) */
#wpCard { opacity: 1; filter: none; }
#wpCard.wp-muted { opacity:.6; filter:grayscale(.1); }

/* Header row + action area */
.wp-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}

/* Entire table (thead + tbody) is inside this wrapper so it can be hidden */
.wp-files-panel { margin-top: 10px; display: none; }
#wpFilesPanel { margin-top: 10px; display: none; } /* id alias */

/* Canvas area â€” match remote canvas spacing */
.wp-canvas-wrap {
  display: flex;
  justify-content: center;
  margin-top: 6px; /* close to card title, like remote */
}

.wp-canvas-shell {
  position: relative;
  display: inline-block;
  user-select: none;
  border-radius: 50%;
  padding: 4px;             /* tighter bezel, remote has 8px */
  background: #11161d;
}

/* Canvas scaled like remote (#lvgl_canvas) */
#wpCanvas {
  display: block;
  width: min(92vw, 320px);
  height: auto;
  background: #000;
  border: 3px solid #6b7280;   /* gray border */
  border-radius: 50%;
  clip-path: circle(50% at 50% 50%);
}

.wp-actions {
  margin-top: 10px;
  display: flex;
  gap: 8px;
  justify-content: center;
  flex-wrap: wrap;
}

#wpCard .wp-progress {
  margin-top:10px;
  display:none;                 /* hidden by default */
  flex-direction:column;        /* vertical stacking */
  align-items:center;
  gap:6px;
  text-align:center;
}
#wpCard .wp-progress progress {
  width:min(100%,360px);
  margin:0 auto;
}

/* Files table */
#wpFilesPanel table.files { table-layout: fixed; max-width: 100%; width: 100%; }
table.files { width: 100%; border-collapse: collapse; font-size: 12px; }
table.files th, table.files td { padding: 6px 8px; border-bottom: 1px solid #1f2a44; }

table.files th {
  font-weight: 600;
  font-size: 13px;
  text-align: left;
  color: #cfe4ff;
}

/* Name column narrower with ellipsis */
table.files th.name,
table.files td.name {
  width: 55%;                      /* was wider */
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Size column right-aligned */
table.files th.size,
table.files td.size {
  width: 100px;
  text-align: right;
  white-space: nowrap;
}

/* Actions column centered */
table.files th.actions,
table.files td.actions {
  width: 130px;
  text-align: center;
  white-space: nowrap;
}

/* Action buttons */
td.actions .actions-wrap { display: inline-flex; align-items: center; gap: 6px; }
.icon-btn { background: none; border: 0; padding: 4px; margin: 0; color: #8ab4ff; cursor: pointer; border-radius: 8px; }
.icon-btn:hover { color: #fff; background: rgba(255,255,255,.04); }

/* Material Symbols */
.material-symbols-outlined {
  font-family: 'Material Symbols Outlined';
  font-weight: normal;
  font-style: normal;
  font-size: 18px;
  line-height: 1;
  display: inline-block;
  text-transform: none;
  letter-spacing: normal;
  white-space: nowrap;
  direction: ltr;
  font-feature-settings: 'liga';
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
  vertical-align: middle;
}

.intentions-card { display:flex; flex-direction:column; gap:14px; }
.intentions-head { display:flex; justify-content:space-between; gap:16px; flex-wrap:wrap; align-items:flex-start; }
.intentions-copy h3 { margin-bottom:6px; }
.intentions-copy p { margin:0; max-width:520px; }
.intentions-actions { display:flex; gap:8px; flex-wrap:wrap; align-items:center; }
.intentions-auto { display:flex; align-items:center; gap:10px; font-size:10px; color:#cde3ff; }
.intentions-auto input { width:18px; height:18px; }
.intentions-hint { margin:0; }
.intentions-table-wrap { border:1px solid #1a2733; border-radius:12px; overflow:hidden; background:#0d131c; }
.intentions-table-wrap table { width:100%; border-collapse:collapse; min-width:380px; }
.intentions-table-wrap thead { background:#142033; }
.intentions-table-wrap th { padding:12px 10px; font-size:10px; text-transform:uppercase; letter-spacing:0.4px; color:#a9bdd3; text-align:left; }
.intentions-table-wrap td { padding:6px; border-top:1px solid #182334; font-size:10px; vertical-align:top; }
.intentions-table-wrap tbody tr:nth-child(even) { background:rgba(255,255,255,0.02); }
.intentions-table-wrap tbody tr:hover { background:rgba(66,153,225,0.08); }
.intentions-table-wrap td:nth-child(1), .intentions-table-wrap th:nth-child(1) { width:36px; text-align:center; }
.intentions-table-wrap td:nth-child(2) { width:24%; }
.intentions-table-wrap td:nth-child(3) { width:24%; }
.intentions-table-wrap td:nth-child(4) { width:24%; }
.intentions-table-wrap td:nth-child(5) { width:16%; }
.intentions-table-wrap input[type="date"], .intentions-table-wrap select { width:100%; padding:8px 10px; background:#101b2c; color:#eaf0f6; border:1px solid #233144; border-radius:8px; font-size:10px; }
.intentions-table-wrap input[type="date"]:focus, .intentions-table-wrap select:focus { outline:2px solid #3a8bff; }
.intentions-empty { padding:16px; text-align:center; }
@media (max-width: 860px) {
  .intentions-table-wrap table { min-width:0; }
  .intentions-desc-toggle { font-size:11px; }
}

.intentions-title-cell { display:block; width:100%; }
.intentions-title { font-weight:600; color:#cfe4ff; display:block; font-size:11px; }
.intentions-desc { display:none; align-items:flex-start; gap:6px; margin-top:4px; }
.intentions-desc-toggle { background:none; border:none; color:#a9bdd3; cursor:pointer; padding:0; line-height:1; font-size:14px; width:18px; height:18px; display:inline-flex; align-items:center; justify-content:center; transition:color 0.18s ease; }
.intentions-desc-toggle:hover:not(:disabled) { color:#cfe4ff; }
.intentions-desc-toggle:focus-visible { outline:2px solid #3a8bff; border-radius:50%; outline-offset:2px; }
.intentions-desc-toggle:disabled { cursor:default; opacity:0.4; }
.intentions-desc-text { font-size:11px; color:#8fa5bf; overflow:hidden; transition:max-height 0.22s ease; white-space:pre-line; padding:0 2px; flex:1 1 100%; }
.intentions-desc-text.expanded { }
